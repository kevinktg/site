<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kismet OS Rollout | Official Backend Design</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <!-- Icons & Charts -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* --- KISMET GLASS THEME --- */
        :root {
            --navy-deep: #1d3c5d;
            --navy-surface: #0a2540;
            --gold-primary: #d4af37;
            --gold-glow: rgba(212, 175, 55, 0.5);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-surface: rgba(255, 255, 255, 0.03);
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            --success: #10b981;
            --danger: #ef4444;
            --card-radius: 24px;
            --transition: all 0.3s ease;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--navy-deep);
            background: radial-gradient(circle at 50% -20%, #2a4d6d 0%, var(--navy-deep) 70%);
            color: var(--text-main);
            overflow-x: hidden;
            min-height: 100vh;
            line-height: 1.6;
        }

        body::before {
            content: ''; position: fixed; top: 10%; left: 50%; transform: translateX(-50%);
            width: 800px; height: 600px;
            background: radial-gradient(circle, rgba(10, 37, 64, 0.6) 0%, transparent 70%);
            z-index: -1; filter: blur(80px); pointer-events: none;
        }
        #canvas-bg { position: fixed; inset: 0; z-index: -2; opacity: 0.3; pointer-events: none; }

        h1, h2, h3 { font-family: 'Playfair Display', serif; font-weight: 700; }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px 80px; position: relative; z-index: 1; }
        .fade-in { animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* --- HEADER --- */
        header { padding: 60px 0 40px; text-align: center; }
        .header-logo {
            margin-bottom: 30px;
        }
        .header-logo img {
            height: 160px;
            width: auto;
            max-width: 100%;
        }
        .badge {
            display: inline-flex; align-items: center; gap: 8px;
            background: rgba(212, 175, 55, 0.1); padding: 6px 16px; border-radius: 50px;
            font-size: 0.75rem; font-weight: 600; letter-spacing: 1.5px; color: var(--gold-primary);
            border: 1px solid rgba(212, 175, 55, 0.3); text-transform: uppercase; margin-bottom: 20px;
        }
        header h1 {
            font-size: 3.5rem; line-height: 1.1; margin-bottom: 15px;
            background: linear-gradient(to right, #fff, #cbd5e1); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        header p { font-size: 1.1rem; color: var(--text-muted); max-width: 600px; margin: 0 auto; font-weight: 300; }

        /* --- NAVIGATION SWITCHER --- */
        .nav-switcher {
            display: flex; justify-content: center; gap: 20px; margin-bottom: 50px;
        }
        .nav-tab {
            padding: 12px 30px; border-radius: 50px; background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border); color: var(--text-muted); font-weight: 600; cursor: pointer;
            transition: var(--transition); display: flex; align-items: center; gap: 10px;
        }
        .nav-tab:hover { background: rgba(255,255,255,0.1); color: white; }
        .nav-tab.active {
            background: var(--gold-primary); color: var(--navy-deep); border-color: var(--gold-primary);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        /* --- VIEWS --- */
        .view-section { display: none; animation: fadeIn 0.5s ease; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- GLASS PANELS --- */
        .glass-panel {
            background: var(--glass-surface); backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); border-radius: var(--card-radius);
            padding: 40px; margin-bottom: 30px; position: relative; overflow: hidden;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.5);
        }
        .glass-panel::after {
            content: ''; position: absolute; top: 0; inset-x: 0; height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        }

        /* --- ADVISOR FORM ELEMENTS --- */
        .form-group { margin-bottom: 40px; }
        .form-label { display: block; font-family: 'Playfair Display', serif; font-size: 1.4rem; margin-bottom: 20px; border-left: 3px solid var(--gold-primary); padding-left: 15px; }
        
        /* Slider */
        .range-container { padding: 30px; background: rgba(255,255,255,0.02); border-radius: 16px; border: 1px solid var(--glass-border); }
        input[type=range] { -webkit-appearance: none; width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; outline: none; margin: 10px 0; cursor: pointer; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 28px; height: 28px; border-radius: 50%; background: linear-gradient(135deg, var(--gold-primary), #b8941f); border: 3px solid #fff; box-shadow: 0 0 20px var(--gold-glow); cursor: pointer; transition: transform 0.2s; }
        input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }
        .range-labels { display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 0.85rem; color: var(--text-muted); font-weight: 600; text-transform: uppercase; letter-spacing: 1px; }
        .range-labels span.active { color: var(--gold-primary); text-shadow: 0 0 10px var(--gold-glow); }

        /* Tiles */
        .tile-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; }
        .tile-option { position: relative; cursor: pointer; display: block; user-select: none; }
        .tile-option input { position: absolute; opacity: 0; width: 0; height: 0; }
        .tile-content { padding: 25px; border-radius: 16px; background: rgba(255,255,255,0.02); border: 1px solid var(--glass-border); transition: var(--transition); height: 100%; display: flex; flex-direction: column; gap: 10px; pointer-events: none; }
        .tile-option:hover .tile-content { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.2); }
        .tile-option input:checked + .tile-content { background: linear-gradient(145deg, rgba(212, 175, 55, 0.15), rgba(10, 37, 64, 0.6)); border-color: var(--gold-primary); box-shadow: 0 0 20px rgba(212, 175, 55, 0.1); transform: translateY(-3px); }
        .tile-icon { width: 40px; height: 40px; background: rgba(255,255,255,0.05); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--text-muted); font-size: 20px; transition: var(--transition); }
        .tile-option input:checked + .tile-content .tile-icon { background: var(--gold-primary); color: var(--navy-deep); }
        .tile-title { font-weight: 600; font-size: 1.1rem; color: var(--text-main); }
        .tile-desc { font-size: 0.85rem; color: var(--text-muted); line-height: 1.4; }

        /* Button */
        .btn-main { width: 100%; background: linear-gradient(135deg, #d4af37 0%, #a88b2c 100%); color: #fff; border: none; padding: 24px; font-family: 'Inter', sans-serif; font-size: 1rem; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; border-radius: 12px; cursor: pointer; box-shadow: 0 10px 30px rgba(212, 175, 55, 0.2); transition: var(--transition); position: relative; overflow: hidden; }
        .btn-main:hover { transform: translateY(-2px); box-shadow: 0 15px 40px rgba(212, 175, 55, 0.3); }
        .btn-main.loading::after { content: ''; position: absolute; width: 20px; height: 20px; border: 2px solid #fff; border-top-color: transparent; border-radius: 50%; animation: spin 0.8s linear infinite; margin-left: 10px; vertical-align: middle; display: inline-block; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- BLUEPRINT ELEMENTS --- */
        .stat-row { display: flex; gap: 20px; flex-wrap: wrap; }
        .stat-card { flex: 1; background: rgba(10, 37, 64, 0.6); border: 1px solid var(--glass-border); padding: 30px; border-radius: 16px; text-align: center; min-width: 200px; }
        .stat-val { font-family: 'Playfair Display', serif; font-size: 3rem; color: var(--gold-primary); line-height: 1; margin-bottom: 10px; }
        .stat-label { font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); }

        .flow-container { display: flex; justify-content: space-between; align-items: center; gap: 10px; margin-top: 40px; position: relative; }
        .flow-container::before { content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 2px; background: rgba(255,255,255,0.1); z-index: 0; transform: translateY(-50%); }
        .flow-node { background: rgba(5, 18, 36, 0.8); border: 1px solid var(--glass-border); width: 140px; height: 140px; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; z-index: 1; transition: var(--transition); box-shadow: 0 0 20px rgba(0,0,0,0.3); }
        .flow-node i { font-size: 32px; margin-bottom: 10px; color: var(--text-muted); }
        .flow-node span { font-size: 0.85rem; font-weight: 600; text-align: center; }
        .flow-node.bottleneck { border-color: var(--danger); box-shadow: 0 0 30px rgba(239, 68, 68, 0.2); }
        .flow-node.bottleneck i { color: var(--danger); }
        .flow-node.revenue { border-color: var(--success); } .flow-node.revenue i { color: var(--success); }

        .node-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center; }
        .node-grid.center { grid-template-columns: 1fr; text-align: center; justify-items: center; }
        .node-grid.split { grid-template-columns: 1fr 80px 1fr; }
        .entity-node { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 20px; border-radius: 16px; text-align: center; width: 100%; max-width: 280px; margin: 0 auto; box-shadow: 0 10px 30px rgba(0,0,0,0.3); position: relative; }
        .entity-node::before { content: ''; position: absolute; width: 10px; height: 10px; background: var(--gold-primary); border-radius: 50%; left: 50%; transform: translate(-50%, -50%); box-shadow: 0 0 10px var(--gold-primary); }
        .entity-node.top::before { top: 0; } .entity-node.bottom::before { top: 100%; }
        .entity-icon { font-size: 24px; color: var(--text-muted); margin-bottom: 10px; }
        .entity-title { font-weight: 700; color: #fff; margin-bottom: 5px; }
        .entity-sub { font-size: 0.75rem; color: var(--text-muted); }

        .eco-map { position: relative; display: flex; flex-direction: column; gap: 60px; padding: 20px 0; }
        .eco-spine { position: absolute; left: 50%; top: 40px; bottom: 40px; width: 2px; background: linear-gradient(to bottom, rgba(212, 175, 55, 0), var(--gold-primary), rgba(212, 175, 55, 0)); transform: translateX(-50%); z-index: 0; }
        .phase-block { position: relative; z-index: 1; }
        .phase-label { text-align: center; margin-bottom: 30px; position: relative; }
        .phase-label span { background: var(--navy-deep); padding: 5px 15px; border: 1px solid var(--glass-border); border-radius: 50px; color: var(--gold-primary); font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 15px var(--navy-deep); }

        .auto-bubble { background: linear-gradient(135deg, rgba(66, 133, 244, 0.1), rgba(10, 37, 64, 0.8)); border: 1px solid rgba(66, 133, 244, 0.3); border-radius: 12px; padding: 15px; font-size: 0.85rem; color: #a5b4fc; display: inline-flex; align-items: center; gap: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); max-width: 250px; text-align: left; }
        .auto-bubble i { color: #4285F4; font-size: 1.2rem; }
        
        .refer-node { width: 120px; height: 120px; border-radius: 50%; background: var(--success); display: flex; flex-direction: column; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(16, 185, 129, 0.3); color: var(--navy-deep); font-weight: 800; z-index: 2; cursor: pointer; transition: var(--transition); border: 4px solid rgba(255,255,255,0.2); }
        .refer-node:hover { transform: scale(1.1); }

        /* --- DRAWERS --- */
        .action-bar { position: fixed; bottom: 40px; right: 40px; display: flex; gap: 15px; z-index: 100; }
        .trigger-btn { background: var(--gold-primary); color: var(--navy-deep); padding: 15px 30px; border-radius: 50px; font-weight: 700; box-shadow: 0 10px 30px rgba(212, 175, 55, 0.4); cursor: pointer; transition: 0.3s; display: flex; align-items: center; gap: 10px; }
        .trigger-btn:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(212, 175, 55, 0.6); }
        .trigger-btn.secondary { background: rgba(10, 37, 64, 0.9); color: var(--gold-primary); border: 1px solid var(--gold-primary); }
        
        .drawer-overlay { position: fixed; inset: 0; background: rgba(5, 18, 36, 0.8); backdrop-filter: blur(8px); z-index: 200; opacity: 0; pointer-events: none; transition: 0.3s; }
        .drawer-overlay.active { opacity: 1; pointer-events: auto; }
        .drawer { position: fixed; top: 0; right: 0; height: 100%; width: 600px; max-width: 100%; background: var(--navy-deep); border-left: 1px solid var(--gold-primary); transform: translateX(100%); transition: 0.4s cubic-bezier(0.16, 1, 0.3, 1); z-index: 201; padding: 50px; overflow-y: auto; }
        .drawer.active { transform: translateX(0); }
        .prompt-block { background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        .code-box { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; font-family: monospace; font-size: 0.8rem; color: #a5b4fc; overflow-x: auto; white-space: pre-wrap; border: 1px solid var(--glass-border); }
        .comparison-table { width: 100%; border-collapse: collapse; margin-top: 30px; }
        .comparison-table th { text-align: left; color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase; padding: 10px; border-bottom: 1px solid var(--glass-border); }
        .comparison-table td { padding: 15px 10px; border-bottom: 1px solid var(--glass-border); color: var(--text-main); font-size: 0.95rem; }
        .comparison-table tr:last-child td { border: none; }
        .winner-cell { color: var(--success); font-weight: 700; }
        .loser-cell { color: var(--danger); opacity: 0.8; }

        /* --- NEW: GOOGLE VERSE STYLES --- */
        .verse-grid {
            display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 15px; margin-top: 30px;
        }
        .verse-card {
            background: rgba(255,255,255,0.02); border: 1px solid var(--glass-border);
            border-radius: 16px; padding: 20px; text-align: center; transition: var(--transition);
            display: flex; flex-direction: column; align-items: center; height: 100%;
        }
        .verse-card:hover { border-color: var(--gold-primary); transform: translateY(-5px); background: rgba(255,255,255,0.05); }
        .verse-icon { font-size: 32px; margin-bottom: 15px; color: var(--text-main); }
        .verse-icon.sheets { color: #10b981; }
        .verse-icon.drive { color: #facc15; }
        .verse-icon.app { color: #3b82f6; }
        .verse-icon.n8n { color: #ef4444; }
        
        .verse-title { font-size: 1rem; font-weight: 700; margin-bottom: 5px; }
        .verse-role { font-size: 0.75rem; color: var(--gold-primary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; }
        .verse-desc { font-size: 0.85rem; color: var(--text-muted); }

        /* --- TIMELINE --- */
        .timeline-track { display: flex; align-items: stretch; justify-content: space-between; gap: 20px; margin-top: 40px; position: relative; }
        .timeline-step { flex: 1; display: flex; flex-direction: column; gap: 20px; position: relative; z-index: 2; }
        .step-marker { font-size: 3rem; font-weight: 800; color: rgba(255,255,255,0.05); position: absolute; top: -20px; left: 10px; pointer-events: none; font-family: 'Playfair Display', serif; }
        .step-title { font-size: 1rem; color: var(--gold-primary); font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; padding-left: 10px; }
        .timeline-card-group { display: flex; flex-direction: column; gap: 15px; }
        .workflow-card { background: rgba(255, 255, 255, 0.03); border: 1px solid var(--glass-border); border-radius: 16px; padding: 20px; display: flex; align-items: center; gap: 15px; position: relative; overflow: hidden; }
        .brain-card { background: linear-gradient(145deg, rgba(10, 37, 64, 0.9), rgba(212, 175, 55, 0.1)); border: 1px solid var(--gold-primary); padding: 30px; text-align: center; flex-direction: column; box-shadow: 0 0 40px rgba(212, 175, 55, 0.15); }
        .wf-icon { width: 40px; height: 40px; background: rgba(255,255,255,0.05); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; color: var(--gold-primary); flex-shrink: 0; }
        .wf-icon.google { color: var(--text-main); background: linear-gradient(135deg, #4285F4, #34A853); }
        .wf-content h4 { font-family: 'Inter', sans-serif; font-size: 0.95rem; margin-bottom: 2px; color: white; font-weight: 600; }
        .wf-content p { font-size: 0.8rem; color: var(--text-muted); }
        /* Connectors */
        .timeline-connector { flex: 0 0 60px; display: flex; align-items: center; justify-content: center; position: relative; }
        .connector-line { width: 100%; height: 2px; background: rgba(255,255,255,0.1); position: relative; overflow: hidden; }
        .connector-pulse { position: absolute; top: 0; left: 0; width: 40%; height: 100%; background: linear-gradient(90deg, transparent, var(--gold-primary), transparent); animation: pulseLine 1.5s infinite linear; }
        @keyframes pulseLine { 0% { left: -40%; } 100% { left: 100%; } }
        
        /* Workflow Tabs */
        .wf-tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 30px; flex-wrap: wrap; }
        .wf-tab { padding: 10px 20px; border-radius: 50px; border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); color: var(--text-muted); font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: var(--transition); }
        .wf-tab.active { background: var(--gold-primary); color: var(--navy-deep); border-color: var(--gold-primary); box-shadow: 0 5px 15px rgba(212,175,55,0.3); }

        /* Week-by-Week Roadmap Styles */
        .roadmap-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
        .roadmap-card { background: rgba(255,255,255,0.02); border: 1px solid var(--glass-border); border-radius: 16px; padding: 25px; transition: var(--transition); position: relative; overflow: hidden; }
        .roadmap-card:hover { border-color: var(--gold-primary); background: rgba(255,255,255,0.05); transform: translateY(-3px); }
        .week-badge { display: inline-block; background: var(--gold-primary); color: var(--navy-deep); font-weight: 700; font-size: 0.75rem; padding: 4px 12px; border-radius: 50px; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }
        .week-title { font-size: 1.2rem; font-weight: 700; color: white; margin-bottom: 5px; }
        .week-goal { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 20px; font-style: italic; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; display: block; }
        .action-list { list-style: none; padding: 0; margin: 0; }
        .action-list li { display: flex; align-items: start; gap: 10px; margin-bottom: 8px; font-size: 0.85rem; color: var(--text-main); }
        .action-list li i { color: var(--success); font-size: 1rem; margin-top: 2px; }

        /* Mobile */
        @media (max-width: 768px) {
            .node-grid, .node-grid.split { grid-template-columns: 1fr; gap: 30px; }
            .eco-spine { display: none; }
            .action-bar { flex-direction: column; bottom: 20px; right: 20px; }
            .drawer { width: 100%; padding: 20px; }
            .tile-grid { grid-template-columns: 1fr; }
            .verse-grid { grid-template-columns: 1fr 1fr; }
            .timeline-track { flex-direction: column; gap: 40px; }
            .timeline-connector { height: 40px; width: 2px; margin: 0 auto; flex: none; }
            .connector-line { width: 2px; height: 100%; }
            .connector-pulse { width: 100%; height: 40%; animation: pulseLineVert 1.5s infinite linear; background: linear-gradient(180deg, transparent, var(--gold-primary), transparent); }
            @keyframes pulseLineVert { 0% { top: -40%; } 100% { top: 100%; } }
            .step-marker { left: auto; right: 0; }
            .step-header { text-align: center; }
            .roadmap-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <canvas id="canvas-bg"></canvas>

    <div class="container">
        <header class="fade-in">
            <div class="header-logo">
                <img src="assets/ksimet.webp" alt="Kismet">
            </div>
            <div class="badge"><i class="ph-fill ph-database"></i> Official Backend Design</div>
            <h1>Kismet OS <span>Rollout</span></h1>
            <p>This is the official backend design.</p>
        </header>

        <!-- NAV SWITCHER -->
        <div class="nav-switcher fade-in" style="animation-delay: 0.1s;">
            <div class="nav-tab active" onclick="switchTab('advisor', this)">
                <i class="ph-bold ph-calculator"></i> System Advisor
            </div>
            <div class="nav-tab" onclick="switchTab('blueprint', this)">
                <i class="ph-bold ph-blueprint"></i> Strategic Blueprint
            </div>
        </div>

        <!-- ===========================
             VIEW 1: ADVISOR (Original)
             =========================== -->
        <div id="view-advisor" class="view-section active">
            <div class="glass-panel">
                <h2 style="margin-bottom: 30px;">Stack Configuration</h2>
                
                <div class="form-group">
                    <label class="form-label">01. Tech Capability</label>
                    <div class="range-container">
                        <div class="range-labels" id="rangeLabels">
                            <span class="active">Basic</span><span>Adaptive</span><span>Expert</span>
                        </div>
                        <input type="range" id="techScore" min="1" max="10" value="5" oninput="updateSlider(this.value)">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">02. Core Friction</label>
                    <div class="tile-grid">
                        <label class="tile-option">
                            <input type="radio" name="friction" value="data" checked>
                            <div class="tile-content">
                                <div class="tile-icon"><i class="ph ph-database"></i></div>
                                <div><div class="tile-title">Data Chaos</div><div class="tile-desc">Scattered leads</div></div>
                            </div>
                        </label>
                        <label class="tile-option">
                            <input type="radio" name="friction" value="followup">
                            <div class="tile-content">
                                <div class="tile-icon"><i class="ph ph-phone-outgoing"></i></div>
                                <div><div class="tile-title">Missed Follow-ups</div><div class="tile-desc">Slipping through cracks</div></div>
                            </div>
                        </label>
                        <label class="tile-option">
                            <input type="radio" name="friction" value="scale">
                            <div class="tile-content">
                                <div class="tile-icon"><i class="ph ph-chart-line-up"></i></div>
                                <div><div class="tile-title">Scaling Limits</div><div class="tile-desc">Breaks at volume</div></div>
                            </div>
                        </label>
                    </div>
                </div>

                <button class="btn-main" id="calcBtn" onclick="calculateStack()">
                    Design Architecture <i class="ph-bold ph-arrow-right" style="margin-left: 8px;"></i>
                </button>
            </div>

            <div class="glass-panel hidden" id="results-panel">
                <div style="text-align:center; margin-bottom:30px;">
                    <div style="color:var(--gold-primary); text-transform:uppercase; font-weight:700; margin-bottom:10px;">Optimal Configuration</div>
                    <h2 id="result-title" style="font-size:3rem;">SIM / n8n</h2>
                    <p id="result-desc" style="color:var(--text-muted); font-size:1.2rem;">The "Invisible CRM" Strategy</p>
                </div>
                <div class="stat-row">
                    <div class="stat-card"><div class="stat-val" id="score-fit">98%</div><div class="stat-label">Strategic Fit</div></div>
                    <div class="stat-card"><div class="stat-val" id="score-cost">$123</div><div class="stat-label">Run Rate</div></div>
                    <div class="stat-card"><div class="stat-val" id="score-risk">Low</div><div class="stat-label">Risk</div></div>
                </div>
            </div>
        </div>

        <!-- ===========================
             VIEW 2: BLUEPRINT (New)
             =========================== -->
        <div id="view-blueprint" class="view-section">
            
            <!-- REALITY CHECK -->
            <div class="glass-panel">
                <h2 style="margin-bottom: 30px; font-size: 1.8rem;">The Reality Check</h2>
                <div class="stat-row">
                    <div class="stat-card">
                        <div class="stat-val">40%</div>
                        <div class="stat-label">Admin Time Saved</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-val" style="color: var(--text-main);">100%</div>
                        <div class="stat-label">Partner Driven Revenue</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-val" style="color: var(--success);">ZERO</div>
                        <div class="stat-label">Data Sovereignty Risk</div>
                    </div>
                </div>
            </div>

            <!-- THE GOOGLE-VERSE ARCHITECTURE (New) -->
            <div class="glass-panel">
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2 style="font-size: 1.8rem;">The Google-verse Architecture</h2>
                    <p style="color: var(--text-muted);">A sovereign asset you own, not software you rent.</p>
                </div>
                
                <div class="verse-grid">
                    <!-- Card 1: Drive -->
                    <div class="verse-card">
                        <i class="ph-fill ph-hard-drives verse-icon drive"></i>
                        <div class="verse-role">Storage Layer</div>
                        <div class="verse-title">Google Drive</div>
                        <div class="verse-desc">The "Vault". Structured client folders for Docs, Compliance & Handover.</div>
                    </div>
                    
                    <!-- Card 2: Sheets -->
                    <div class="verse-card">
                        <i class="ph-fill ph-table verse-icon sheets"></i>
                        <div class="verse-role">Database Layer</div>
                        <div class="verse-title">Google Sheets</div>
                        <div class="verse-desc">The "Brain". All data lives here. Owned by you, accessible anywhere.</div>
                    </div>

                    <!-- Card 3: AppSheet -->
                    <div class="verse-card">
                        <i class="ph-fill ph-device-mobile verse-icon app"></i>
                        <div class="verse-role">Interface Layer</div>
                        <div class="verse-title">AppSheet</div>
                        <div class="verse-desc">The "Face". Mobile app for door-knockers to input data instantly.</div>
                    </div>

                    <!-- Card 4: n8n -->
                    <div class="verse-card">
                        <i class="ph-fill ph-lightning verse-icon n8n"></i>
                        <div class="verse-role">Logic Layer</div>
                        <div class="verse-title">SIM / n8n</div>
                        <div class="verse-desc">The "Nervous System". Connects the Verse to SMS, Email & AI.</div>
                    </div>
                </div>
            </div>

            <!-- THE 4-WEEK ROADMAP (NEW) -->
            <div class="glass-panel">
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2 style="font-size: 1.8rem;">The 4-Week Roadmap</h2>
                    <p style="color: var(--text-muted);">From "Swamp" to "System" in 30 days.</p>
                </div>
                
                <div class="roadmap-grid">
                    <!-- WEEK 1 -->
                    <div class="roadmap-card">
                        <span class="week-badge">Week 01</span>
                        <div class="week-title">The "Clean Room"</div>
                        <span class="week-goal">Goal: Secure environment & map logic.</span>
                        <ul class="action-list">
                            <li><i class="ph-fill ph-check-circle"></i> Establish 00-99 Google Drive Hierarchy</li>
                            <li><i class="ph-fill ph-check-circle"></i> Execute "Swamp Check" on existing data</li>
                            <li><i class="ph-fill ph-check-circle"></i> Set up Google Groups Access Control</li>
                            <li><i class="ph-fill ph-check-circle"></i> Deliver Visual Workflow Maps</li>
                        </ul>
                    </div>

                    <!-- WEEK 2 -->
                    <div class="roadmap-card">
                        <span class="week-badge">Week 02</span>
                        <div class="week-title">The "Refinery"</div>
                        <span class="week-goal">Goal: Build the backend & the brain.</span>
                        <ul class="action-list">
                            <li><i class="ph-fill ph-check-circle"></i> Create Master Relational Google Sheet</li>
                            <li><i class="ph-fill ph-check-circle"></i> Lock Master Sheet (Validation Rules)</li>
                            <li><i class="ph-fill ph-check-circle"></i> Set up Sovereign n8n Instance</li>
                            <li><i class="ph-fill ph-check-circle"></i> Connect Twilio Webhooks</li>
                        </ul>
                    </div>

                    <!-- WEEK 3 -->
                    <div class="roadmap-card">
                        <span class="week-badge">Week 03</span>
                        <div class="week-title">The "Interface"</div>
                        <span class="week-goal">Goal: Give the team their tools.</span>
                        <ul class="action-list">
                            <li><i class="ph-fill ph-check-circle"></i> Build AppSheet Mobile App</li>
                            <li><i class="ph-fill ph-check-circle"></i> Implement "45-Second Rule" Forms</li>
                            <li><i class="ph-fill ph-check-circle"></i> Connect App to Master Sheet</li>
                            <li><i class="ph-fill ph-check-circle"></i> Configure Push Notifications</li>
                        </ul>
                    </div>

                    <!-- WEEK 4 -->
                    <div class="roadmap-card">
                        <span class="week-badge">Week 04</span>
                        <div class="week-title">The "Handover"</div>
                        <span class="week-goal">Goal: Go live with a trained team.</span>
                        <ul class="action-list">
                            <li><i class="ph-fill ph-check-circle"></i> User Acceptance Testing (UAT)</li>
                            <li><i class="ph-fill ph-check-circle"></i> "Don't Break the Sheet" Training</li>
                            <li><i class="ph-fill ph-check-circle"></i> Go Live (Switch on n8n)</li>
                            <li><i class="ph-fill ph-check-circle"></i> Official Account Handover</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- THE BOTTLENECK -->
            <div class="glass-panel">
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2 style="font-size: 1.8rem;">The Critical Bottleneck</h2>
                    <p style="color: var(--text-muted);">Where revenue currently gets stuck.</p>
                </div>
                <div class="flow-container">
                    <div class="flow-node"><i class="ph ph-megaphone"></i><span>Lead Gen</span></div>
                    <div class="flow-node"><i class="ph ph-user-circle"></i><span>Consult</span></div>
                    <div class="flow-node bottleneck"><i class="ph ph-files"></i><span>Doc Chase</span></div>
                    <div class="flow-node revenue"><i class="ph ph-currency-dollar"></i><span>Settlement</span></div>
                </div>
            </div>

            <!-- ECOSYSTEM MAP -->
            <div class="glass-panel">
                <div class="eco-map">
                    <div class="eco-spine"></div>

                    <!-- PHASE 1 -->
                    <div class="phase-block">
                        <div class="phase-label"><span>Phase 1: Acquisition</span></div>
                        <div class="node-grid">
                            <div class="auto-bubble" style="justify-self: end;">
                                <i class="ph-fill ph-microphone-stage"></i>
                                <div><strong>Trillet.ai / Twilio</strong><br>Voice Agent via n8n</div>
                            </div>
                            <div class="entity-node top bottom">
                                <div class="entity-icon"><i class="ph-duotone ph-user-plus"></i></div>
                                <div class="entity-title">New Lead Record</div>
                                <div class="entity-sub">Google Sheets Database</div>
                            </div>
                        </div>
                    </div>

                    <!-- PHASE 2 -->
                    <div class="phase-block">
                        <div class="phase-label"><span>Phase 2: Conversion</span></div>
                        <div class="node-grid split">
                            <div class="auto-bubble" style="justify-self: end;">
                                <i class="ph-fill ph-robot"></i>
                                <div><strong>SIM / n8n + Gemini</strong><br>Policy Logic & Routing</div>
                            </div>
                            <div class="entity-node top bottom">
                                <div class="entity-icon"><i class="ph-duotone ph-calendar-check"></i></div>
                                <div class="entity-title">Appointment</div>
                                <div class="entity-sub">Status: Booked</div>
                            </div>
                            <div style="text-align:center; color:var(--text-muted); font-size:0.8rem;">
                                <i class="ph-bold ph-arrows-clockwise"></i><br>Activity Loop
                            </div>
                        </div>
                    </div>

                    <!-- PHASE 3 -->
                    <div class="phase-block">
                        <div class="phase-label"><span>Phase 3: Execution</span></div>
                        <div class="node-grid center">
                            <div class="entity-node top">
                                <div class="entity-icon"><i class="ph-duotone ph-handshake"></i></div>
                                <div class="entity-title">Opportunity</div>
                                <div class="entity-sub">Qualified</div>
                            </div>
                            <div class="refer-node">REFER</div>
                            <div class="auto-bubble" style="border-color: var(--success); background: rgba(16, 185, 129, 0.1);">
                                <i class="ph-fill ph-cpu" style="color: var(--success);"></i>
                                <div><strong>SIM / n8n Swarm</strong><br>Doc Chase â€¢ ASIC Log</div>
                            </div>
                        </div>
                    </div>

                    <!-- PHASE 4 -->
                    <div class="phase-block">
                        <div class="phase-label"><span>Phase 4: Scale</span></div>
                        <div class="node-grid center">
                            <div class="entity-node top">
                                <div class="entity-icon" style="color: #fbbf24;"><i class="ph-duotone ph-video-camera"></i></div>
                                <div class="entity-title">Nano Banana</div>
                                <div class="entity-sub">Creative AI</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- THE WORKFLOW ENGINE (Interactive) -->
            <div class="glass-panel fade-in" style="animation-delay: 0.25s;">
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2 style="font-size: 1.8rem;">The Logic Engine</h2>
                    <p style="color: var(--text-muted);">Select a scenario to see the Google + n8n Logic.</p>
                </div>

                <!-- TABS -->
                <div class="wf-tabs">
                    <div class="wf-tab active" onclick="setWorkflow('door', this)">Door Knock</div>
                    <div class="wf-tab" onclick="setWorkflow('missed', this)">Missed Call</div>
                    <div class="wf-tab" onclick="setWorkflow('consult', this)">Docs Chase</div>
                </div>

                <div class="timeline-track">
                    <!-- STEP 1: INGESTION -->
                    <div class="timeline-step">
                        <div class="step-marker">01</div>
                        <div class="step-header"><div class="step-title">Ingestion</div></div>
                        <div class="timeline-card-group" id="ingest-col">
                            <!-- Dynamic Content -->
                        </div>
                    </div>

                    <!-- CONNECTOR 1 -->
                    <div class="timeline-connector">
                        <div class="connector-line"><div class="connector-pulse"></div></div>
                    </div>

                    <!-- STEP 2: HYGIENE (New) -->
                    <div class="timeline-step">
                        <div class="step-marker">02</div>
                        <div class="step-header"><div class="step-title">Data Hygiene</div></div>
                        <div class="workflow-card" style="border-color: var(--gold-primary);">
                            <div class="wf-icon" style="color: var(--gold-primary);"><i class="ph-fill ph-broom"></i></div>
                            <div class="wf-content">
                                <h4>n8n: Data Wash</h4>
                                <p style="font-size: 0.75rem; color: var(--text-muted);">Sanitize & Verify</p>
                            </div>
                        </div>
                    </div>

                    <!-- CONNECTOR 2 -->
                    <div class="timeline-connector">
                        <div class="connector-line"><div class="connector-pulse" style="animation-delay: 0.5s;"></div></div>
                    </div>

                    <!-- STEP 3: INTELLIGENCE -->
                    <div class="timeline-step">
                        <div class="step-marker">03</div>
                        <div class="step-header"><div class="step-title">Intelligence</div></div>
                        <div class="workflow-card brain-card">
                            <i class="ph-duotone ph-cpu" style="font-size: 36px; color: var(--gold-primary); margin-bottom: 10px;"></i>
                            <h3 style="font-size: 1rem; font-weight: 700; color: white; margin-bottom: 5px;">SIM / n8n + Gemini</h3>
                            <div id="brain-col" style="text-align: left; width: 100%; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.1);">
                                <!-- Dynamic Content -->
                            </div>
                        </div>
                    </div>

                    <!-- CONNECTOR 3 -->
                    <div class="timeline-connector">
                        <div class="connector-line"><div class="connector-pulse" style="animation-delay: 1s;"></div></div>
                    </div>

                    <!-- STEP 4: ACTION -->
                    <div class="timeline-step">
                        <div class="step-marker">04</div>
                        <div class="step-header"><div class="step-title">Action</div></div>
                        <div class="timeline-card-group" id="action-col">
                            <!-- Dynamic Content -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Good AI Australia | Sovereign Stack Architecture | Confidential</p>
        </footer>
    </div>

    <!-- TRIGGERS -->
    <div class="action-bar">
        <div class="trigger-btn secondary" onclick="toggleDrawer('prompt-drawer')">
            <i class="ph-fill ph-code-block"></i> Prompt Vault
        </div>
        <div class="trigger-btn" onclick="toggleDrawer('drawer')">
            <i class="ph-fill ph-shield-check"></i> Why SIM / n8n?
        </div>
    </div>

    <div class="drawer-overlay" id="overlay" onclick="closeAll()"></div>

    <!-- VALIDATION DRAWER -->
    <div class="drawer" id="drawer">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
            <h2 style="font-size: 2rem; color: var(--gold-primary);">SIM / n8n vs. SaaS</h2>
            <i class="ph-bold ph-x" style="font-size: 24px; cursor: pointer;" onclick="closeAll()"></i>
        </div>
        <p style="color: #ccc; margin-bottom: 30px;">The "Zero-Latency" business model.</p>
        
        <h4 style="color: var(--text-main); border-bottom: 1px solid var(--glass-border); padding-bottom: 10px;">01. The 3-Year Cost Trajectory</h4>
        <div style="height: 200px; width: 100%; margin: 20px 0;">
            <canvas id="costChart"></canvas>
        </div>

        <h4 style="color: var(--text-main); border-bottom: 1px solid var(--glass-border); padding-bottom: 10px; margin-top: 40px;">02. Stack Comparison</h4>
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Traditional SaaS</th>
                    <th style="color: var(--gold-primary);">Google-verse + SIM/n8n</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Data Ownership</strong></td>
                    <td class="loser-cell">Rented (Vendor Lock)</td>
                    <td class="winner-cell">100% Owned (Sheets)</td>
                </tr>
                <tr>
                    <td><strong>Cost Structure</strong></td>
                    <td class="loser-cell">Exponential ($300/user)</td>
                    <td class="winner-cell">Flat Fixed ($)</td>
                </tr>
                <tr>
                    <td><strong>Custom Logic</strong></td>
                    <td class="loser-cell">Rigid / Expensive</td>
                    <td class="winner-cell">Infinite (SIM/n8n)</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- PROMPT DRAWER -->
    <div class="drawer" id="prompt-drawer">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
            <h2 style="font-size: 2rem; color: var(--gold-primary);">System Prompts</h2>
            <i class="ph-bold ph-x" style="font-size: 24px; cursor: pointer;" onclick="closeAll()"></i>
        </div>
        <div class="prompt-block">
            <div style="color: var(--gold-primary); font-weight:700; margin-bottom:10px;">01. The Gatekeeper</div>
            <div class="code-box">You are the Lead Qualification Engine...</div>
        </div>
        <div class="prompt-block">
            <div style="color: var(--gold-primary); font-weight:700; margin-bottom:10px;">02. Instant Response SMS</div>
            <div class="code-box">You are 'Josh', a senior consultant...</div>
        </div>
    </div>

    <script>
        // --- PARTICLES ---
        (function(){
            const c = document.getElementById('canvas-bg'); if(!c) return;
            const ctx = c.getContext('2d'); let w, h, p=[];
            const rsz = () => { w=c.width=window.innerWidth; h=c.height=window.innerHeight; };
            class P { constructor(){this.r();} r(){this.x=Math.random()*w;this.y=Math.random()*h;this.v={x:(Math.random()-.5)*.3,y:(Math.random()-.5)*.3};this.s=Math.random()*1.5;this.a=Math.random()*.5;} u(){this.x+=this.v.x;this.y+=this.v.y;if(this.x<0||this.x>w||this.y<0||this.y>h)this.r();} d(){ctx.beginPath();ctx.arc(this.x,this.y,this.s,0,Math.PI*2);ctx.fillStyle=`rgba(255,255,255,${this.a*.3})`;ctx.fill();} }
            const init = () => { rsz(); for(let i=0;i<60;i++)p.push(new P()); loop(); };
            const loop = () => { ctx.clearRect(0,0,w,h); p.forEach(x=> {x.u();x.d()}); requestAnimationFrame(loop); };
            window.onresize=rsz; init();
        })();

        // --- TAB LOGIC ---
        function switchTab(tab, el) {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
            document.getElementById('view-' + tab).classList.add('active');
            
            if(el) {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                el.classList.add('active');
            }
        }

        // --- ADVISOR LOGIC ---
        function updateSlider(val) {
            const labels = document.querySelectorAll('#rangeLabels span');
            labels.forEach(l => l.classList.remove('active'));
            if(val <= 4) labels[0].classList.add('active');
            else if(val <= 7) labels[1].classList.add('active');
            else labels[2].classList.add('active');
        }

        function calculateStack() {
            const btn = document.getElementById('calcBtn');
            btn.classList.add('loading'); btn.innerHTML = 'Analyzing...';
            
            setTimeout(() => {
                document.getElementById('assessment-panel').style.display = 'none';
                document.getElementById('results-panel').classList.remove('hidden');
                document.getElementById('results-panel').classList.add('fade-in');
            }, 800);
        }

        // --- WORKFLOW LOGIC ---
        const workflows = {
            'door': {
                ingest: [
                    { icon: 'ph-device-mobile', title: 'AppSheet', desc: 'Mobile Capture', google: true }
                ],
                brain: [
                    { text: 'Gemini: Rate Lead' },
                    { text: 'SIM / n8n: Route to Rep' }
                ],
                action: [
                    { icon: 'ph-file-xls', title: 'Google Sheets', desc: 'Row Added', google: true },
                    { icon: 'ph-slack-logo', title: 'Slack', desc: '#sales-leads' }
                ]
            },
            'missed': {
                ingest: [
                    { icon: 'ph-phone-missed', title: 'Missed Call', desc: 'Twilio Webhook' }
                ],
                brain: [
                    { text: 'SIM / n8n: Lookup ID' },
                    { text: 'Gemini: Draft SMS' }
                ],
                action: [
                    { icon: 'ph-chat-circle-text', title: 'Twilio SMS', desc: '"Text Back"' },
                    { icon: 'ph-slack-logo', title: 'Slack', desc: '#missed-calls' }
                ]
            },
            'consult': {
                ingest: [
                    { icon: 'ph-folder', title: 'Google Drive', desc: 'Docs Upload', google: true }
                ],
                brain: [
                    { text: 'NotebookLM: Analyze' },
                    { text: 'SIM / n8n: Check Gaps' }
                ],
                action: [
                    { icon: 'ph-check-square', title: 'Google Sheets', desc: 'Status Update', google: true },
                    { icon: 'ph-slack-logo', title: 'Slack', desc: 'Gap Analysis' }
                ]
            }
        };

        function setWorkflow(key, btn) {
            document.querySelectorAll('.wf-tab').forEach(t => t.classList.remove('active'));
            if(btn) btn.classList.add('active');

            const data = workflows[key];

            const ingestHTML = data.ingest.map(item => `
                <div class="workflow-card">
                    <div class="wf-icon ${item.google ? 'google' : ''}"><i class="ph-bold ${item.icon}"></i></div>
                    <div class="wf-content"><h4>${item.title}</h4><p>${item.desc}</p></div>
                </div>
            `).join('');
            document.getElementById('ingest-col').innerHTML = ingestHTML;

            const brainHTML = data.brain.map(item => `
                <p style="font-size: 0.85rem; color: var(--success); margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                    <i class="ph-fill ph-lightning"></i> ${item.text}
                </p>
            `).join('');
            document.getElementById('brain-col').innerHTML = brainHTML;

            const actionHTML = data.action.map(item => `
                <div class="workflow-card">
                    <div class="wf-icon ${item.google ? 'google' : ''}"><i class="ph-bold ${item.icon}"></i></div>
                    <div class="wf-content"><h4>${item.title}</h4><p>${item.desc}</p></div>
                </div>
            `).join('');
            document.getElementById('action-col').innerHTML = actionHTML;
        }

        // Init Default Workflow
        setWorkflow('door', document.querySelector('.wf-tab.active'));

        // --- DRAWERS ---
        function closeAll() {
            document.querySelectorAll('.drawer').forEach(d => d.classList.remove('active'));
            document.getElementById('overlay').classList.remove('active');
        }
        function toggleDrawer(id) {
            closeAll();
            document.getElementById(id).classList.add('active');
            document.getElementById('overlay').classList.add('active');
        }

        // --- CHART (Cost) ---
        new Chart(document.getElementById('costChart'), {
            type: 'line',
            data: {
                labels: ['Y1', 'Y2', 'Y3'],
                datasets: [{label:'SaaS',data:[25000,45000,80000],borderColor:'#ef4444'},{label:'Google-verse + SIM',data:[2000,2500,3000],borderColor:'#10b981'}]
            },
            options: { responsive:true, maintainAspectRatio:false, plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true, ticks:{color:'#94a3b8'}}, x:{grid:{display:false}, ticks:{color:'#94a3b8'}}} }
        });
    </script>
</body>
</html>